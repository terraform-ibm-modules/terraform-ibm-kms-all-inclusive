{
  "products": [
    {
      "name": "deploy-arch-ibm-kms",
      "label": "Cloud automation for Key Protect",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "security"
      ],
      "keywords": [
        "KMS",
        "Key",
        "Key Ring",
        "Key Protect",
        "IaC",
        "infrastructure as code",
        "terraform",
        "solution"
      ],
      "short_description": "Creates and configures IBM Cloud Key Management resources",
      "long_description": "This architecture supports creating and configuring an IBM Key Protect instance, Key Rings, and Keys.",
      "offering_docs_url": "https://github.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive/blob/main/solutions/fully-configurable/README.md",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive/main/images/key_protect_icon.svg",
      "provider_name": "IBM",
      "features": [
        {
          "title": "Creates a Key Protect instance.",
          "description": "Creates and configures a Key Protect instance."
        },
        {
          "title": "Creates Key Rings and Keys",
          "description": "Creates Key Rings and Keys in a KMS instance (Key Protect or HPCS)."
        }
      ],
      "support_details": "This product is in the community registry, as such support is handled through the originated repo. If you experience issues please open an issue in that repository [https://github.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive/issues](https://github.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive/issues). Please note this product is not supported via the IBM Cloud Support Center.",
      "flavors": [
        {
          "label": "Fully configurable",
          "name": "fully-configurable",
          "install_type": "fullstack",
          "working_directory": "solutions/fully-configurable",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "CIS IBM Cloud Foundations Benchmark v1.1.0",
                "profile_version": "1.1.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "kms"
            }
          ],
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "existing_resource_group_name",
              "required": false,
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              }
            },
            {
              "key": "region",
              "required": true,
              "default_value": "",
              "options": [
                {
                  "displayname": "Dallas (us-south)",
                  "value": "us-south"
                },
                {
                  "displayname": "Frankfurt (eu-de)",
                  "value": "eu-de"
                },
                {
                  "displayname": "London (eu-gb)",
                  "value": "eu-gb"
                },
                {
                  "displayname": "Madrid (eu-es)",
                  "value": "eu-es"
                },
                {
                  "displayname": "Osaka (jp-osa)",
                  "value": "jp-osa"
                },
                {
                  "displayname": "Sao Paulo (br-sao)",
                  "value": "br-sao"
                },
                {
                  "displayname": "Sydney (au-syd)",
                  "value": "au-syd"
                },
                {
                  "displayname": "Tokyo (jp-tok)",
                  "value": "jp-tok"
                },
                {
                  "displayname": "Toronto (ca-tor)",
                  "value": "ca-tor"
                },
                {
                  "displayname": "Washington (us-east)",
                  "value": "us-east"
                }
              ]
            },
            {
              "key": "prefix",
              "required": true
            },
            {
              "key": "global_resource_group_name",
              "type": "string",
              "default_value": "Default",
              "description": "The name of the global resource group to create, when this variable is provided only one resource group will be created and all other resource group name variables will be ignored. If `prefix` is provided, it is prefixed on the name in the following format: `<prefix>-<global_resource_group_name>`.",
              "display_name": "Single Resource Group",
              "required": false,
              "virtual": true
            },
            {
              "key": "provider_visibility",
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ]
            },
            {
              "key": "key_protect_instance_name"
            },
            {
              "key": "key_protect_plan",
              "options": [
                {
                  "displayname": "Tiered Pricing",
                  "value": "tiered-pricing"
                },
                {
                  "displayname": "Cross Region Resiliency",
                  "value": "cross-region-resiliency"
                }
              ]
            },
            {
              "key": "key_protect_allowed_network",
              "options": [
                {
                  "displayname": "Public and private",
                  "value": "public-and-private"
                },
                {
                  "displayname": "Private only",
                  "value": "private-only"
                }
              ]
            },
            {
              "key": "key_protect_resource_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "key_protect_access_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "rotation_interval_month"
            },
            {
              "key": "existing_kms_instance_crn"
            },
            {
              "key": "kms_endpoint_type",
              "hidden": true,
              "options": [
                {
                  "displayname": "Public",
                  "value": "public"
                },
                {
                  "displayname": "Private",
                  "value": "private"
                }
              ]
            },
            {
              "key": "keys"
            },
            {
              "key": "key_protect_instance_cbr_rules"
            }

          ],
          "architecture": {
            "descriptions": "This architecture supports creating and configuring an Key Protect instance.",
            "features": [
              {
                "title": "Creates a Key Protect instance.",
                "description": "Creates and configures a Key Protect instance."
              },
              {
                "title": "Creates Key Rings and Keys",
                "description": "Creates Key Rings and Keys in a KMS instance (Key Protect or HPCS)."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "IBM Key Management Services",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive/main/reference-architecture/key_protect.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture supports creating and configuring IBM Key Management resources"
              }
            ]
          },
          "dependencies": [
          {
            "name": "deploy-arch-ibm-account-infra-base",
            "description": "<p>Sets up foundational infrastructure in your IBM Cloud account to organize and secure your environment.</p><ul>  <li><strong>Resource groups only</strong> – Creates structured resource groups for organizing cloud resources.</li>  <li><strong>Resource groups with Account Settings</strong> – Also configures IAM, access control, and security policies.</li></ul><p><a href=\"https://github.com/terraform-ibm-modules/terraform-ibm-account-infrastructure-base/tree/main\" target=\"_blank\">Learn more</a></p>",
            "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
            "flavors": [
              "resource-group-only", "fully-configurable"
            ],
            "default_flavor": "resource-group-only",
            "id": "63641cec-6093-4b4f-b7b0-98d2f4185cd6-global",
            "input_mapping": [
              {
                "dependency_output": "security_resource_group_name",
                "version_input": "existing_resource_group_name"
              },
              {
                "dependency_input": "global_resource_group_name",
                "version_input": "global_resource_group_name",
                "reference_version": true
              },
              {
                "dependency_input": "prefix",
                "version_input": "prefix",
                "reference_version": true
              },
              {
                "dependency_input": "provider_visibility",
                "version_input": "provider_visibility",
                "reference_version": true
              },
              {
                "version_input": "use_existing_resource_group",
                "value": true
              }
            ],
            "optional": false,
            "version": "v2.2.3"
          }
        ],
          "dependency_version_2": true
        }
      ]
    }
  ]
}
