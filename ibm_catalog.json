{
  "products": [
    {
      "name": "deploy-arch-ibm-kms",
      "label": "Cloud automation for Key Protect",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "security",
        "converged_infra"
      ],
      "keywords": [
        "KMS",
        "Key",
        "Key Ring",
        "Key Protect",
        "IaC",
        "infrastructure as code",
        "terraform",
        "solution"
      ],
      "short_description": "Provisions and configures IBM Cloud Key Protect, including key rings and keys",
      "long_description": "This architecture creates and configures a [Key Protect](https://cloud.ibm.com/docs/key-protect/index.html) instance, enabling centralized management of encryption keys used to secure sensitive data across IBM Cloud services. It creates key rings within the instance used to logically group encryption keys, facilitating structured administration and separation of responsibilities. The keys are then provisioned within these key rings, enabling secure data encryption, key rotation, and lifecycle management aligned with organizational security and compliance requirements.\n\nℹ️ This Terraform-based automation is part of a broader suite of IBM-maintained Infrastructure as Code (IaC) assets, each following the naming pattern \"Cloud automation for *servicename*\" and focusing on single IBM Cloud service. These single-service deployable architectures can be used on their own to streamline and automate service deployments through an [IaC approach](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-understanding-projects), or assembled together into a broader [automated IaC stack](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-config-stack) to automate the deployment of an end-to-end solution architecture.",
      "offering_docs_url": "https://github.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive/blob/main/solutions/fully-configurable/README.md",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive/main/images/key_protect_icon.svg",
      "provider_name": "IBM",
      "features": [
        {
          "title": "Key Protect instance",
          "description": "Provisions a Key Protect instance to protect data used by supported IBM Cloud services. [Learn more](https://cloud.ibm.com/catalog/services/key-protect#about)."
        },
        {
          "title": "Key Rings and Keys",
          "description": "Enables the creation of key rings and keys for data encryption, supporting both Key Protect and Hyper Protect Crypto Services (HPCS)."
        },
        {
          "title": "Context Based Restriction(CBR)",
          "description": "Has the capability to configure [CBR rules](https://cloud.ibm.com/docs/key-protect?topic=key-protect-access-control-with-cbr) for the Key Protect instance."
        }
      ],
      "support_details": "This product is in the community registry, as such support is handled through the [original repo](https://github.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive). If you experience issues please open an issue [here](https://github.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive/issues). Please note this product is not supported via the IBM Cloud Support Center.",
      "flavors": [
        {
          "label": "Fully configurable",
          "name": "fully-configurable",
          "index": 1,
          "install_type": "fullstack",
          "working_directory": "solutions/fully-configurable",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "CIS IBM Cloud Foundations Benchmark v1.1.0",
                "profile_version": "1.1.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "All Account Management services",
              "notes": "[Optional] Required to create new resource groups when enabling the Account Configuration integration."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "All Identity and Access enabled services",
              "notes": "[Optional] Required to create new resource groups with account settings when enabling the Account Configuration integration."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "kms",
              "notes": "Required to create a Key Protect instance or configure its key rings and keys."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "hs-crypto",
              "notes": "[Optional] Required to provision key rings and keys for an existing Hyper Protect Crypto Services (HPCS) instance."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "service_name": "Resource group only",
              "notes": "Viewer access is required in the resource group you want to provision in."
            }
          ],
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "region",
              "required": true,
              "options": [
                {
                  "displayname": "Dallas (us-south)",
                  "value": "us-south"
                },
                {
                  "displayname": "Frankfurt (eu-de)",
                  "value": "eu-de"
                },
                {
                  "displayname": "London (eu-gb)",
                  "value": "eu-gb"
                },
                {
                  "displayname": "Madrid (eu-es)",
                  "value": "eu-es"
                },
                {
                  "displayname": "Osaka (jp-osa)",
                  "value": "jp-osa"
                },
                {
                  "displayname": "Sao Paulo (br-sao)",
                  "value": "br-sao"
                },
                {
                  "displayname": "Sydney (au-syd)",
                  "value": "au-syd"
                },
                {
                  "displayname": "Tokyo (jp-tok)",
                  "value": "jp-tok"
                },
                {
                  "displayname": "Montreal (ca-mon)",
                  "value": "ca-mon"
                },
                {
                  "displayname": "Toronto (ca-tor)",
                  "value": "ca-tor"
                },
                {
                  "displayname": "Washington (us-east)",
                  "value": "us-east"
                }
              ]
            },
            {
              "key": "prefix",
              "required": true
            },
            {
              "key": "key_protect_plan",
              "required": true,
              "options": [
                {
                  "displayname": "Tiered Pricing",
                  "value": "tiered-pricing"
                },
                {
                  "displayname": "Cross Region Resiliency",
                  "value": "cross-region-resiliency"
                }
              ]
            },
            {
              "key": "provider_visibility",
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ],
              "hidden": true
            },
            {
              "key": "existing_resource_group_name",
              "display_name": "resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              }
            },
            {
              "key": "key_protect_instance_name"
            },
            {
              "key": "existing_kms_instance_crn"
            },
            {
              "key": "keys",
              "type": "array",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            },
            {
              "key": "rotation_interval_month"
            },
            {
              "key": "kms_endpoint_type",
              "hidden": true,
              "options": [
                {
                  "displayname": "Public",
                  "value": "public"
                },
                {
                  "displayname": "Private",
                  "value": "private"
                }
              ]
            },
            {
              "key": "key_protect_allowed_network",
              "options": [
                {
                  "displayname": "Public and private",
                  "value": "public-and-private"
                },
                {
                  "displayname": "Private only",
                  "value": "private-only"
                }
              ]
            },
            {
              "key": "key_protect_resource_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "key_protect_access_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "key_protect_instance_cbr_rules",
              "type": "array",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            }
          ],
          "architecture": {
            "features": [
              {
                "title": "",
                "description": "Configured to use IBM secure-by-default standards, but can be edited to fit your use case."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Cloud automation for Key Protect - Fully configurable",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive/main/reference-architecture/deployable-architecture-key-protect.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture provisions an IBM Cloud Key Protect instance to securely manage encryption keys. It creates key rings to logically organize them, and generates or imports keys with options for rotation policies. It also configures context-based restrictions (CBR) to enforce security and compliance."
              }
            ]
          },
          "dependencies": [
            {
              "name": "deploy-arch-ibm-account-infra-base",
              "description": "Cloud automation for Account Configuration organizes your IBM Cloud account with a ready-made set of resource groups by default and, when you enable the \"with Account Settings\" option, it also applies baseline security and governance settings.",
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "flavors": [
                "resource-group-only",
                "resource-groups-with-account-settings"
              ],
              "default_flavor": "resource-group-only",
              "id": "63641cec-6093-4b4f-b7b0-98d2f4185cd6-global",
              "input_mapping": [
                {
                  "dependency_output": "security_resource_group_name",
                  "version_input": "existing_resource_group_name"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "provider_visibility",
                  "version_input": "provider_visibility",
                  "reference_version": true
                }
              ],
              "optional": true,
              "on_by_default": false,
              "version": "v3.0.23"
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.10.5"
        },
        {
          "label": "Security-enforced",
          "name": "security-enforced",
          "index": 2,
          "install_type": "fullstack",
          "working_directory": "solutions/security-enforced",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "CIS IBM Cloud Foundations Benchmark v1.1.0",
                "profile_version": "1.1.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "All Identity and Access enabled services",
              "notes": "[Optional] Required to apply context-based restrictions for the Key Protect instance."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "kms",
              "notes": "Required to create a Key Protect instance or configure its key rings and keys."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "hs-crypto",
              "notes": "[Optional] Required to provision key rings and keys for an existing Hyper Protect Crypto Services (HPCS) instance."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "service_name": "Resource group only",
              "notes": "Viewer access is required in the resource group you want to provision in."
            }
          ],
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "region",
              "required": true,
              "options": [
                {
                  "displayname": "Dallas (us-south)",
                  "value": "us-south"
                },
                {
                  "displayname": "Frankfurt (eu-de)",
                  "value": "eu-de"
                },
                {
                  "displayname": "London (eu-gb)",
                  "value": "eu-gb"
                },
                {
                  "displayname": "Madrid (eu-es)",
                  "value": "eu-es"
                },
                {
                  "displayname": "Osaka (jp-osa)",
                  "value": "jp-osa"
                },
                {
                  "displayname": "Sao Paulo (br-sao)",
                  "value": "br-sao"
                },
                {
                  "displayname": "Sydney (au-syd)",
                  "value": "au-syd"
                },
                {
                  "displayname": "Tokyo (jp-tok)",
                  "value": "jp-tok"
                },
                {
                  "displayname": "Montreal (ca-mon)",
                  "value": "ca-mon"
                },
                {
                  "displayname": "Toronto (ca-tor)",
                  "value": "ca-tor"
                },
                {
                  "displayname": "Washington (us-east)",
                  "value": "us-east"
                }
              ]
            },
            {
              "key": "prefix",
              "required": true
            },
            {
              "key": "key_protect_plan",
              "required": true,
              "options": [
                {
                  "displayname": "Tiered Pricing",
                  "value": "tiered-pricing"
                },
                {
                  "displayname": "Cross Region Resiliency",
                  "value": "cross-region-resiliency"
                }
              ]
            },
            {
              "key": "existing_resource_group_name",
              "display_name": "resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              }
            },
            {
              "key": "key_protect_instance_name"
            },
            {
              "key": "existing_kms_instance_crn"
            },
            {
              "key": "keys",
              "type": "array",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            },
            {
              "key": "rotation_interval_month"
            },
            {
              "key": "key_protect_resource_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "key_protect_access_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "key_protect_instance_cbr_rules",
              "type": "array",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            },
            {
              "key": "provider_visibility",
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ],
              "hidden": true
            }
          ],
          "architecture": {
            "features": [
              {
                "title": "",
                "description": "Configured to use IBM secure-by-default standards that can't be changed."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Cloud automation for Key Protect - Security-enforced",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-kms-all-inclusive/main/reference-architecture/deployable-architecture-key-protect.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture provisions an IBM Cloud Key Protect instance with private only networks allowed to securely manage encryption keys. It creates key rings with private endpoints to logically organize them, and generates or imports keys with options for rotation policies. It also configures context-based restrictions (CBR) to enforce security and compliance."
              }
            ]
          },
          "dependencies": [
            {
              "name": "deploy-arch-ibm-account-infra-base",
              "description": "Cloud automation for Account Configuration organizes your IBM Cloud account with a ready-made set of resource groups by default and, when you enable the \"with Account Settings\" option, it also applies baseline security and governance settings.",
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "flavors": [
                "resource-group-only",
                "resource-groups-with-account-settings"
              ],
              "default_flavor": "resource-group-only",
              "id": "63641cec-6093-4b4f-b7b0-98d2f4185cd6-global",
              "input_mapping": [
                {
                  "dependency_output": "security_resource_group_name",
                  "version_input": "existing_resource_group_name"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                }
              ],
              "optional": true,
              "on_by_default": false,
              "version": "v3.0.7"
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.10.5"
        }
      ]
    }
  ]
}
